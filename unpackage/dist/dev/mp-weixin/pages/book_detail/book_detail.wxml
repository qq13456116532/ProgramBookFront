<view class="book-detail-container"><view class="headBackgroundContainer"><view class="headBackground" style="{{('background: url('+bookDetail.headerImage+') no-repeat center; background-size: 200%;')}}"></view></view><view class="head"><view class="bookInfo"><image class="headImg" src="{{bookDetail.headerImage}}" mode="aspectFill"></image><view class="left-text"><view class="bookName">{{bookDetail.name}}</view><view class="author">{{"作者："+bookDetail.author}}</view><view class="wordsNum">字数：348.33万</view><view class="source">{{"最新章节："+bookDetail.newest}}</view><view class="updatetime">{{"更新时间："+bookDetail.updateTime}}</view></view></view><view class="clearfix"></view><view class="btn-group"><view data-event-opts="{{[['tap',[['addOrRemove',['$event']]]]]}}" class="addToList" bindtap="__e"><view class="true" hidden="{{!isInList==0}}"><icon class="addList-icon"></icon>加入书架</view><view class="false" hidden="{{!isInList==1}}"><icon type="success_no_circle" color="#fd9941" size="20"></icon>从书架中移除</view></view><view data-event-opts="{{[['tap',[['goToReader',['$event']]]]]}}" class="read" bindtap="__e"><image src="../../static/read1.png"></image>立即阅读</view></view></view><view class="book-des"><view data-event-opts="{{[['tap',[['showAllDesMethod',['$event']]]]]}}" class="des-content" bindtap="__e">{{''+(showAllDes||!bookDetail.shortDes?bookDetail.des:bookDetail.shortDes)+''}}<text class="read-more" hidden="{{showAllDes||!bookDetail.shortDes}}">阅读全部</text></view></view><view class="splitor"></view><view class="comments"><view class="title">精彩评论<text data-event-opts="{{[['tap',[['toWriteComment',['$event']]]]]}}" class="add-comment" bindtap="__e">写评论</text></view><view class="comment-list"><block wx:for="{{comments}}" wx:for-item="item" wx:for-index="__i0__" wx:key="commentid"><block wx:if="{{comments.length>0}}"><view class="comment-item" data-commentid="{{item.rootComment.commentid}}"><image class="headImg" src="{{item.rootComment.avatar}}" mode="scaleToFill"></image><view class="comment-right"><view class="reader-name" data-userid="{{item.rootComment.userid}}">{{item.rootComment.nickname+''}}</view><view class="create-time">{{item.rootComment.time}}</view><view class="comment">{{item.rootComment.content}}</view><block wx:if="{{item.child.length>0}}"><view class="comment-more" data-commentid="{{item.rootComment.commentid}}" data-event-opts="{{[['tap',[['readMoreComments',['$event']]]]]}}" bindtap="__e">{{'查看'+item.child.length+'回复 >'}}</view></block><block wx:if="{{item.child.length>0}}"><view class="childComments" hidden="{{!item.rootComment.isOpenMoreComment}}"><block wx:for="{{item.child}}" wx:for-item="childItem" wx:for-index="i" wx:key="commentid"><view class="child-item" data-commentid="{{childItem.commentid}}" data-nickname="{{childItem.nickname}}" data-userid="{{childItem.userid}}" data-event-opts="{{[['tap',[['toWriteComment',['$event']]]]]}}" bindtap="__e">{{''+childItem.nickname+" 回复 "+childItem.reply+" ： "+childItem.content+''}}<text class="childItem-time">{{childItem.time}}</text></view></block></view></block><view class="toolbar"><icon class="{{[item.rootComment.isLike==1?'iconfont icon-selectetd':'iconfont icon-like']}}" data-commentid="{{item.rootComment.commentid}}" data-event-opts="{{[['tap',[['addLikeNum',['$event']]]]]}}" bindtap="__e"></icon><text class="likeNum">{{item.rootComment.likenum||0}}</text><icon class="iconfont reply" data-commentid="{{item.rootComment.commentid}}" data-nickname="{{item.rootComment.nickname}}" data-userid="{{item.rootComment.userid}}" data-event-opts="{{[['tap',[['toWriteComment',['$event']]]]]}}" bindtap="__e"></icon></view></view></view></block></block><block wx:if="{{comments.length==0}}"><view class="no-comments"><image src="https://wk-gulimall.oss-cn-beijing.aliyuncs.com/shafa.jfif"></image>暂无评论，快去抢沙发...</view></block></view></view><view class="commnet-input-bar" hidden="{{commentInputHide}}"><input class="comment-input" placeholder="发表评论" placeholder-class="commentInputP" focus="{{!commentInputHide}}" maxlength="100" confirm-type="send" data-event-opts="{{[['blur',[['hideCommentBar',['$event']]]],['confirm',[['sendComment',['$event']]]]]}}" value="{{currentCommentValue}}" bindblur="__e" bindconfirm="__e"/><view data-event-opts="{{[['tap',[['hideCommentBar',['$event']]]]]}}" class="cancle" bindtap="__e">取消</view></view><import vue-id="89ab0a20-1" src="../component/err_tips/err_tips.wxml" bind:__l="__l"></import><import vue-id="89ab0a20-2" src="../component/toast/toast.wxml" bind:__l="__l"></import><import vue-id="89ab0a20-3" src="../component/err_page/err_page.wxml" bind:__l="__l"></import></view>